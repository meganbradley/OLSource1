---
title: Known Issues for SQL Server R Services
ms.custom: 
  - SQL2016_New_Updated
ms.date: 07/04/2016
ms.prod: sql-server-2016
ms.reviewer: na
ms.suite: na
ms.technology: 
  - r-services
ms.tgt_pltfrm: na
ms.topic: article
ms.assetid: 2b37a63a-5ff5-478e-bcc2-d13da3ac241c
manager: paulettm
---
# Known Issues for SQL Server R Services
This topic describes limitations and issues with [!INCLUDE[rsql_productname](../../Topics/TopicNameContainA/includes/rsql_productname_md.md)] and its related components in [!INCLUDE[ssCurrent](../../Topics/TopicNameContainA/includes/ssCurrent_md.md)].  
  
 For information on what's new in [!INCLUDE[ssCurrent](../../Topics/TopicNameContainA/includes/ssCurrent_md.md)], see [What's New in SQL Server 2016](../../Topics/TopicNameNotContainA/What-s-New-in-SQL-Server-2016.md).  
  
## R Services (In-Database)  
 This section lists issues specific to the feature of the database engine that supports R integration in [!INCLUDE[ssCurrent](../../Topics/TopicNameContainA/includes/ssCurrent_md.md)].  
  
### New license agreement for R components required for unattended installs  
 In [!INCLUDE[ssCurrent](../../Topics/TopicNameContainA/includes/ssCurrent_md.md)] RC2, if you use the command line to upgrade an instance of [!INCLUDE[ssCurrent](../../Topics/TopicNameContainA/includes/ssCurrent_md.md)] that has [!INCLUDE[rsql_productname](../../Topics/TopicNameContainA/includes/rsql_productname_md.md)] installed, you must edit the command line to use the new license agreement parameter, */IACCEPTROPENLICENSEAGREEMENT*. Failure to use the correct argument can cause [!INCLUDE[ssNoVersion](../../Topics/TopicNameContainA/includes/ssNoVersion_md.md)] setup to fail.  
  
### SQLRUsers group requires ALLOW LOG ON LOCALLY permission  
 In an environment where the Windows group for R users (**SQLRUsers**) does not have this permission, you might see the following errors:  
  
-   When trying to run R scripts:  
  
     *Unable to launch runtime for 'R' script. Please check the configuration of the 'R' runtime.*  
  
     *An external script error occurred. Unable to launch the runtime.*  
  
-   Errors generated by the [!INCLUDE[rsql_launchpad](../../Topics/TopicNameNotContainA/includes/rsql_launchpad_md.md)] service:  
  
     *Failed to initialize the launcher RLauncher.dll*  
  
     *No launcher dlls were registered!*  
  
-   Security logs indicate that the account, NT SERVICE\MSSQLLAUNCHPAD was unable to log in.  
  
 This issue will be fixed in a future release. As a workaround, grant the user group **SQLRUsers** the permission **ALLOW LOG ON LOCALLY**.  
  
### Remote compute contexts blocked by firewall in SQL Server instances running on Azure virtual machines  
 If you have installed [!INCLUDE[ssCurrent](../../Topics/TopicNameContainA/includes/ssCurrent_md.md)] on a Windows Azure virtual machine, you might not be able to use compute contexts that require use of the virtual machine's workspace. The reason is that, by default, the Azure VM firewall includes a rule that blocks network access for local R user accounts.  
  
 As a workaround, on the Azure VM, open **Windows Firewall with Advanced Security**, select **Outbound Rules**, and disable the following rule: “Block network access for R local user accounts in SQL Server instance MSSQLSERVER”.  
  
### Performance changes between pre-release versions  
 In early preview releases (CTP 3.0, 3.1, 3.2) performance was not optimized. For example, in CTP 3.0 the **ScaleR** functions provided as part of [!INCLUDE[rsql_rre-noversion](../../Topics/TopicNameNotContainA/includes/rsql_rre-noversion_md.md)] did not support multi-process parallelism for [!INCLUDE[ssNoVersion](../../Topics/TopicNameContainA/includes/ssNoVersion_md.md)] data sources.  
  
 To properly evaluate performance, we strongly recommend that you migrate to the latest possible version. Later releases include the ability to push data in parallel between SQL and R, and enable batch mode execution of queries.  
  
### Support for output parameters after RC1 only  
 As of [!INCLUDE[ssCurrent](../../Topics/TopicNameContainA/includes/ssCurrent_md.md)] RC1, the stored procedure, `sp_execute_external_script`,  supports multiple output parameters.  
  
 In earlier versions output parameters are not supported.  
  
### ScaleR functions require SQL authentication in earlier versions  
 If you are using an  early pre-release version of [!INCLUDE[rsql_productname](../../Topics/TopicNameContainA/includes/rsql_productname_md.md)], we recommend that you upgrade to the latest version to take advantage of security changes.  
  
 For example, in CTP 3.0, 3.1, and 3.2, SQL authentication was required to use the **ScaleR** functions from a client workstation to switch the execution context. In RC1, that limitation has been removed.  
  
### Resource governance supported beginning with RC1  
 Use of [!INCLUDE[ssNoVersion](../../Topics/TopicNameContainA/includes/ssNoVersion_md.md)] resource pools is supported beginning with [!INCLUDE[ssCurrent](../../Topics/TopicNameContainA/includes/ssCurrent_md.md)] RC0.  
  
 If you are using an earlier version, the cap on the maximum resource usage of the machine resources is 20%. If the server has 32GB of RAM, the processes RTerm.exe and BxlServer.exe cannot consume more than 6.4GB in a single request. If the default of 20% is not enough, see the documentation for [!INCLUDE[ssNoVersion](../../Topics/TopicNameContainA/includes/ssNoVersion_md.md)] on how to change this value.  
  
### Restrictions on data that can be provided as input to an R script  
 You cannot use in an R script the following types of query results:  
  
-   Data from a [!INCLUDE[tsql](../../Topics/TopicNameContainA/includes/tsql_md.md)] query that references AlwaysEncrypted columns.  
  
-   Data from a [!INCLUDE[tsql](../../Topics/TopicNameContainA/includes/tsql_md.md)] query that references masked columns.  
  
     If you need to use masked data in an R script, a possible workaround is to make a copy of the data in a temporary table and use that data instead.  
  
### Access violation with execution plan that calls external tables from R script  
 You cannot generate an actual execution plan for any call to [sp_execute_external_script (Transact-SQL)](assetId:///de4e1fcd-0e1a-4af3-97ee-d1becc7f04df) that uses a query that references an external table.  
  
## Microsoft R Server (Standalone)  
 This section lists issues specific to the standalone  version of Microsoft R Server.  
  
### Multiple R instances are installed if you install both Standalone and In-Database  
 Although [!INCLUDE[ssNoVersion](../../Topics/TopicNameContainA/includes/ssNoVersion_md.md)] setup includes the option to install Microsoft R Server (Standalone), this option is **not** required in order to use R with [!INCLUDE[tsql](../../Topics/TopicNameContainA/includes/tsql_md.md)].  The Microsoft R Server (Standalone) option can be used to install shared components if you are setting up a data science client computer capable of connecting to either [!INCLUDE[rsql_productname](../../Topics/TopicNameContainA/includes/rsql_productname_md.md)] or a standalone R server.  
  
 If you do install both R Services (In-Database) and Microsoft R Server (standalone) on the same computer, be aware that a separate R instance will be created for each instance of [!INCLUDE[ssCurrent](../../Topics/TopicNameContainA/includes/ssCurrent_md.md)] that has R enabled, as well as a separate instance of R for Microsoft R Server (Standalone).  For example, if you installed the default instance and a named instance, and the R Server (Standalone), you might have three instances of R on the same computer:  
  
-   **Standalone:** C:\Program Files\Microsoft SQL Server\130\R_SERVER  
  
-   **Default instance:** C:\Program Files\Microsoft SQL Server\MSSQL13.MSSQLSERVER\R_SERVICES  
  
-   **Named instance:** C:\Program Files\Microsoft SQL Server\MSSQL13.<instance_name>\R_SERVICES  
  
 We strongly recommend that you use the R instances associated with a database instance only from the context of [!INCLUDE[tsql](../../Topics/TopicNameContainA/includes/tsql_md.md)]. If you need to run other R tools or ad hoc R scripts, use the Standalone R instance, or use a different computer.  
  
### Upgrading R Server (Standalone) to RC3 requires uninstall of RC2  
 If you previously installed Microsoft R Server Standalone in [!INCLUDE[ssCurrent](../../Topics/TopicNameContainA/includes/ssCurrent_md.md)] RC2 and want to upgrade to RC3, you must first uninstall, and then reinstall using [!INCLUDE[ssCurrent](../../Topics/TopicNameContainA/includes/ssCurrent_md.md)] RC3 setup.  
  
1.  Uninstall R Server (Standalone) for [!INCLUDE[ssCurrent](../../Topics/TopicNameContainA/includes/ssCurrent_md.md)] RC2  
  
2.  Upgrade [!INCLUDE[ssCurrent](../../Topics/TopicNameContainA/includes/ssCurrent_md.md)] to RC3 and select the option to install R Services (In-Database). This upgrades the instance of [!INCLUDE[rsql_productname](../../Topics/TopicNameContainA/includes/rsql_productname_md.md)] to RC3; no additional configuration is necessary.  
  
3.  Run [!INCLUDE[ssCurrent](../../Topics/TopicNameContainA/includes/ssCurrent_md.md)] setup for RC3 once more, and install Microsoft R Server (Standalone).  
  
## General  R Issues  
 This section lists issues specific to the version of the R connectivity and performance tools included in [!INCLUDE[ssCurrent](../../Topics/TopicNameContainA/includes/ssCurrent_md.md)] CTP3.  
  
### Not all data types are supported in sp_execute_external_script for R  
 Not all data types that are supported in SQL can be used in R. For example, the **nchar** and **nvarchar** data types are not supported in R.  
  
 As a workaround, cast the unsupported data type to a supported data type.  
  
 For more information about supported data types, see [Working with R Data Types](../../Topics/TopicNameNotContainA/Working-with-R-Data-Types.md).  
  
### Possible string corruption  
 Any round-trip of string data from [!INCLUDE[tsql](../../Topics/TopicNameContainA/includes/tsql_md.md)] to R and then to [!INCLUDE[tsql](../../Topics/TopicNameContainA/includes/tsql_md.md)] again can result in corruption. This is due to the different encodings used in R and in [!INCLUDE[ssNoVersion](../../Topics/TopicNameContainA/includes/ssNoVersion_md.md)], as well as the different collations and languages that are supported in R and [!INCLUDE[tsql](../../Topics/TopicNameContainA/includes/tsql_md.md)]. Any string in a non-ASCII encoding can potentially be handled incorrectly.  
  
 When sending string data to R, convert it to an ASCII representation, if possible.  
  
### Only one raw value can be returned from sp_execute_external_script  
 When a binary data type (the R **raw** data type) is returned from R, the value must be the value in the output data frame.  
  
 Support for multiple **raw** outputs will be added in subsequent releases.  
  
 One possible workaround if multiple output sets are desired is to do multiple calls of the stored procedure and send the result sets back to [!INCLUDE[ssNoVersion](../../Topics/TopicNameContainA/includes/ssNoVersion_md.md)] using ODBC.  
  
 Also, beginning with [!INCLUDE[ssCurrent](../../Topics/TopicNameContainA/includes/ssCurrent_md.md)] RC3 you can return parameter values.  
  
### Loss of precision  
 [!INCLUDE[tsql](../../Topics/TopicNameContainA/includes/tsql_md.md)] and R support different data types; therefore, numeric data types can suffer loss of precision during conversion.  
  
 For more information about implicit data type conversion, see [Working with R Data Types](../../Topics/TopicNameNotContainA/Working-with-R-Data-Types.md).  
  
### Variable scoping error "The sample data set for the analysis has no variables" when using the transformFunc parameter  
 You can pass a *transformFunc* argument in a function such as `rxLinmod` or `rxLogit` to transform the data while modelling. However, nested function calls can  lead to scoping errors in the SQL Server compute context, even if the calls work correctly in the local compute context.  
  
 For example, assume that you have defined two functions `f` and `g` in your local global environment, and `g` calls `f`. In distributed or remote calls involving `g`, the call to `g` might fail because `f`cannot be found, even if you have passed both `f` and `g` to the remote call.  
  
 If you encounter this problem, you can work around the issue by embedding the definition of `f` inside your definition of `g`, anywhere before `g` would ordinarily call `f`.  
  
 For example:  
  
```  
f <- function(x) { 2*x + 3 }  
g <- function(y) {   
              a <- 10 * y  
               f(a)  
}  
  
```  
  
 To avoid the error, rewrite as:  
  
```  
g <- function(y){  
              f <- function(x) { 2*x +3}  
              a <- 10 * y  
              f(a)  
}  
  
```  
  
## Revolution R Enterprise and Microsoft R Open  
 This section lists issues specific to R connectivity, development, and performance tools provided by Revolution Analytics that are included in [!INCLUDE[ssCurrent](../../Topics/TopicNameContainA/includes/ssCurrent_md.md)].  
  
### Running side by side versions of Revolution R Enterprise  
 Installing [!INCLUDE[rsql_rre-short](../../Topics/TopicNameNotContainA/includes/rsql_rre-short_md.md)] side by side with any other version of Revolution R Enterprise  is not supported.  
  
 Uninstall any versions of Revolution R Enterprise that are not compatible with [!INCLUDE[ssCurrent](../../Topics/TopicNameContainA/includes/ssCurrent_md.md)].  
  
 If you have a license to use a different version of Revolution R Enterprise, you must put it on a separate computer from both the [!INCLUDE[ssNoVersion](../../Topics/TopicNameContainA/includes/ssNoVersion_md.md)] instance and any workstation that you want to use to connect to the [!INCLUDE[ssNoVersion](../../Topics/TopicNameContainA/includes/ssNoVersion_md.md)] instance.  
  
### Limited support for RevoScaleR rxExec  
 As of RC0, the `rxExec` function provided by [!INCLUDE[rsql_rre-short](../../Topics/TopicNameNotContainA/includes/rsql_rre-short_md.md)] can be used only in single-threaded mode.  
  
 Parallelism across multiple processes will be added in an upcoming release.  
  
### Data import and manipulation using RevoScaleR  
 When reading **varchar** columns from a database, white space will be trimmed. To prevent this, enclose strings in non-white-space characters.  
  
 When using functions such as `rxDataStep` to create database tables with **varchar** columns, the column width is estimated based on a sample of the data. If the width can vary, it may be necessary to pad all strings to a common length.  
  
 Using a transform to change a variable's data type is not supported when repeated calls to `rxImport` or `rxTextToXdf` are used to import and append rows, combining multiple input files into a single .xdf file.  
  
### Increase maximum parameter size to support rxGetVarInfo  
 If you use data sets with extremely large numbers of variables (e.g., over 40,000), you should set the `max-ppsize` flag when starting R in order to use functions such as `rxGetVarInfo`.  The `max-ppsize` flag specifies the maximum size of the pointer protection stack.  
  
 If you are using the R console (for example, in rgui.exe or rterm.exe), you can set the value of max-ppsize to 500000 by typing:  
  
```  
R --max-ppsize=500000  
```  
  
 If you are using the [!INCLUDE[rsql_developr](../../Topics/TopicNameNotContainA/includes/rsql_developr_md.md)] environment, you can set the `max-ppsize` flag by making this call to the RevoIDE executable:  
  
```  
RevoIDE.exe /RCommandLine --max-ppsize=500000  
```  
  
### Issues with rxDTree function  
 The `rxDTree` function does not currently support in-formula transformations. In particular, using the `F()` syntax for creating factors on the fly is not supported. However, numeric data will be automatically binned.  
  
 Ordered factors are treated the same as factors in all RevoScaleR analysis functions except `rxDTree`.  
  
### Using the R Productivity Environment  
 [!INCLUDE[rsql_productname](../../Topics/TopicNameContainA/includes/rsql_productname_md.md)] includes an R development environment for Windows that was created by Revolution Analytics. The following issues apply to this set of tools, also known as the R Productivity Environment (RPE).  
  
-   You cannot debug into code that has been loaded using the `source()` function within a script. However, if you load the code by using the `revoSource()` function, the code will be instrumented for debugging and can be entered by the debugger.   
    •  
  
-   The first time you launch the help system, it may set itself to use online help rather than local help. If this occurs, you may not see the correct help for RPE dialogs.  
  
     To be sure you have the correct help available, choose **Options…** from the **Tool** menu,  expand **Environment**, expand **Help**, and click **Online**. In th option, **When loading help content**, select **Try local first, then online**.  
  
### Compatibility issues with SQLite ODBC driver and RevoScaleR  
 Revision 0.92 of the SQLite ODBC driver is incompatible with RevoScaleR; revisions 0.88-0.91 and 0.93 and later are known to be compatible.  
  
## See Also  
 [What's New in SQL Server 2016](../../Topics/TopicNameNotContainA/What-s-New-in-SQL-Server-2016.md)   
 [SQL Server 2016 Release Notes](../../Topics/TopicNameNotContainA/SQL-Server-2016-Release-Notes.md)